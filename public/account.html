<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Web Connections Test</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.0/normalize.min.css">
    <link href="https://unpkg.com/material-components-web@v4.0.0/dist/material-components-web.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="account.css">
    <script src="https://unpkg.com/material-components-web@v4.0.0/dist/material-components-web.min.js"></script>
    <script src="face-api.min.js" id="faceApi"></script>
    </head>
  <body id="body" class="mdc-typography">

    <!-- TOP APP BAR -->
    <header id="topbar" class="mdc-top-app-bar mdc-top-app-bar--fixed">
      <div class="mdc-top-app-bar__row">
        <section class="mdc-top-app-bar__section mdc-top-app-bar__section--align-start">
          <button id="navigationButton" class="material-icons mdc-top-app-bar__navigation-icon mdc-icon-button">menu</button>
          <span class="mdc-top-app-bar__title">Big World</span>
        </section>
        
        <section class="mdc-top-app-bar__section mdc-top-app-bar__section--align-end mdc-menu-surface--anchor" role="toolbar">
          <div id="energyBar" role="progressbar" class="mdc-linear-progress">
            <div class="mdc-linear-progress__buffering-dots"></div>
            <div class="mdc-linear-progress__buffer"></div>
            <div class="mdc-linear-progress__bar mdc-linear-progress__primary-bar">
              <span class="mdc-linear-progress__bar-inner"></span>
            </div>
            <div class="mdc-linear-progress__bar mdc-linear-progress__secondary-bar">
              <span class="mdc-linear-progress__bar-inner"></span>
            </div>
          </div>
          
          <button id="profile"
                  class="mdc-icon-button mdc-top-app-bar__action-item mdc-icon-button--on"
                  aria-label="Change account info"
                  aria-pressed="true">
            <img id="profile__image" class="mdc-icon-button__icon mdc-icon-button__icon--on" src="images/anonymous.jpg"/>
          </button>

          <!-- PROFILE MENU -->
          <div id="profilemenu" class="mdc-menu mdc-menu-surface">
            <nav class="mdc-list mdc-list--avatar-list" role="menu" aria-hidden="true" aria-orientation="vertical">

              <a href="#registration" class="mdc-list-item" role="menuitem">
                <img id="profilemenu__image" class="mdc-list-item__graphic" aria-hidden="true"/>
                <span class="mdc-list-item__text">
                  <span class="mdc-list-item__primary-text">Change info</span>
                  <span id="profilemenu__name" class="mdc-list-item__secondary-text"></span>
                </span>
              </a>
              <a href="#energy" class="mdc-list-item" role="menuitem">
                <i class="material-icons mdc-list-item__graphic" aria-hidden="true">battery_charging_full</i>
                <span class="mdc-list-item__text">Energy</span>
              </a>
              <hr class="mdc-list-divider">
              <a href="#registration" id="registerItem" class="mdc-list-item" role="menuitem">
                <i class="material-icons mdc-list-item__graphic" aria-hidden="true">add_to_queue</i>
                <span class="mdc-list-item__text">
                  <span class="mdc-list-item__primary-text">Register User</span>
                  <span class="mdc-list-item__secondary-text">for this device</span>
                </span>
              </a>
              <a href="#login" id="loginItem" class="mdc-list-item mdc-list-item--disabled" role="menuitem">
                <i class="material-icons mdc-list-item__graphic" aria-hidden="true">check_box</i>
                <span class="mdc-list-item__text">Sign in</span>
              </a>
              <a href="#logout" id="logoutItem" class="mdc-list-item mdc-list-item--disabled" role="menuitem">
                <i class="material-icons mdc-list-item__graphic" aria-hidden="true">check_box_outline_blank</i>
                <span class="mdc-list-item__text">Sign out</span>
              </a>
            </nav>
          </div>
        </section>
      </div>
    </header>
    <!-- APP DRAWER -->
    <aside id="appdrawer" class="mdc-drawer mdc-drawer--modal">
      <div class="mdc-drawer__content">        
        <nav class="mdc-list">
          <a class="mdc-list-item" href="#notImplementedDependent" aria-current="page" tabindex="0">
            <i class="material-icons mdc-list-item__graphic" aria-hidden="true">add_to_home_screen</i> <!-- system_update -->
            <span class="mdc-list-item__text">Add to home screen</span>
          </a>
          <a class="mdc-list-item" href="#notImplementedDependent">
            <i class="material-icons mdc-list-item__graphic" aria-hidden="true">center_focus_weak</i>
            <span class="mdc-list-item__text">Share by QR code</span>
          </a>
          <a class="mdc-list-item" href="#notImplementedIndependent">
            <i class="material-icons mdc-list-item__graphic" aria-hidden="true">explore</i>
            <span class="mdc-list-item__text">Something app-specific</span>
          </a>
          <a class="mdc-list-item" href="#notImplementedIndependent">
            <i class="material-icons mdc-list-item__graphic" aria-hidden="true">wc</i>
            <span class="mdc-list-item__text">Another app thing</span>
          </a>
          <a class="mdc-list-item" href="#notImplementedIndependent">
            <i class="material-icons mdc-list-item__graphic" aria-hidden="true">local_bar</i>
            <span class="mdc-list-item__text">Etcetera</span>
          </a>
          <hr class="mdc-list-divider">
          <a class="mdc-list-item" href="#notImplementedIndependent">
            <i class="material-icons mdc-list-item__graphic" aria-hidden="true">info_outline</i>
            <span class="mdc-list-item__text">About Big World</span>
          </a>
          <a class="mdc-list-item" href="#notImplementedDependent">
            <i class="material-icons mdc-list-item__graphic" aria-hidden="true">contact_support</i>
            <span class="mdc-list-item__text">Contact support</span>
          </a>
          <a class="mdc-list-item" href="#notImplementedIndependent">
            <i class="material-icons mdc-list-item__graphic" aria-hidden="true">verified_user</i> <!-- or icon: policy -->
            <span class="mdc-list-item__text">Terms of service</span>
          </a>
          <a class="mdc-list-item" href="#privacy">
            <i class="material-icons mdc-list-item__graphic" aria-hidden="true">vpn_lock</i>
            <span class="mdc-list-item__text">Privacy policy</span>
          </a>
        </nav>
      </div>
    </aside>
    <div class="mdc-drawer-scrim"></div>
    <!-- CONTENT -->
    <div class="mdc-top-app-bar--fixed-adjust">
      <p>These need to be completed before this will make sense to anyone - the minimum viable prototype:
        <ul class="notImplemented">
          <li>FIXME: make sure we work when you don't save anything in browser</li>
          <li>FIXME: strength setting</li>
          <li>FIXME: energy management (unregistered takes 10 seconds to power up)</li>
          <li>FIXME: sample "avatars", to id, give credits, give find-me, must for all(?)</li>
        </ul>
      </p>
      <p>The purpose of this accounts demo is to have real working code to evaluate the underlying technical requirements. It is not meant to proposing a specific UX. But clearly these interact, and so it has to start somewhere. As is, the major features are:
        <ul class="implemented">
          <li>Does not require login to start.</li>
          <li>You don't register just once, but on each device.</li>
          <li>That's because it keeps track on the machine so you don't have to sign in all the time, but confirms when needed. (The model semantics for this is per a W3C draft standard.)</li>
          <li>Tries softly to get you to register, and if you are, tries to get you to use your account, but you <i>can</i> be anonymous.</li>
          <li>Propogates the info to other registered machines upon successful sign in.</li>
          <li>Although discouraged, it does allow multiple users to share a machine.</li>
          <li>Always clear who you are (including anonymous), and groups account-related stuff together.</li>
          <li>Although it is a "single-page app", the URLs all work through reload, and back/forward buttons (while adjusting for current login state).</li>
          <li>It doesn't ask for a credit card until you try to buy something, even during registration.</li>
        </ul>
      </p>
      <p>This demo is a real implementation of accounts, <i>except</i>:
        <ul class="notImplemented">
          <li>Scaling:
            <ul>
              <li>internal server db (redis instead of in-memory that is lost when server shuts down)</li>
              <li>move to highfidelity.co? aws?</li>
              <li>scale up energy and face check</li>
              <li>unit tests</li>
              <li>scale internal client db (localStorage is fine for now, but indexDb is better)</li>
              <li>code cleanup</li>
            </ul>
          </li>
          <li>Security:
            <ul>
              <li>internal keys</li>
              <li>enforce energy consumption (needs keys). The demo is consuming randomly.</li>
              <li>use hashed passwords on server, not raw. (Current is for debugging.)</li>
            </ul>
          </li>
          <li>Product:
            <ul>
              <li>UI theme</li>
              <li>language/localization</li>
              <li>all the stuff that says "not implemented" when you click it, some of which has some interaction with identity and login</li>
              <li>passwordless hardware login (keyfob or touchid). See note about passwords, below.</li>
            </ul>
          </li>
          <li>Operations:
            <ul>
              <li>failure tracking</li>
              <li>email service</li>
              <li>hubspot integration</li>              
              <li>credit card service</li>
              <li>nofication (with service?) (interacts with add-to-home-screen)</li>
            </ul>
          </li>
        </ul>
      </p>
      <!--
      <ol>
        <li>Try changing display name or spending money before registering</li>
        <li>Register, either from the above or from (user) => Register.</li>
        <li>Try updating info after registering</li>
        <li>Try logout, and updating info with or without logout.</li> 
        <li>Try multiple accounts per machine, switching accounts, and updating info from the right or wrong account. This uses a standard API that is implemented with different UIs in different browsers (and of which we do not have control). E.g., on Chrome, look at settings=>autofill=>passwords. So...</li>
        <li>Try multiple machines, or at least multiple browsers.</li>
        <li>Try making a (legit or bogus) registration on another machine (or browser).</li>
        <li>Try transfering money (and try leaving that dialog alone for 20 seconds).</li>
        <li>Try browser refresh and back/forward in various cases. There are some very subtle cases when the browser has multiple accounts stored.</li>
      </ol>
      -->
      <p>Quick discussion of passwords:
        <ol>
          <li>There is a W3C browser API, that everyone seems to support, for working with hardware keys. That is, instead of a password, a user can tap their separate Near-Field Communication keyfob device as authentication, or touch the fingerprint id on a MacBook touchbar. The model here is compatible with the use of this API, but I didn't bother to do so because:
            <ol>
              <li>No one has such devices. E.g., an iPhone doesn't count!</li>
              <li>I'd like to implement it anyway, but it is a <i>lot</i> of fiddly code. So I figured I'd wait until everything else gets ironed out the way we want it to be.</li>
            </ol>
          <li>There is also a W3C browser API for working with "federated credentials" from third-party providers like Google or Facebook. The model here is compatible with the use of this API, but I didn't bother to do so, because I figured that if we're so serious about privacy that we don't want to segment users or track their user experience, we certainly don't want Facebook and Google doing so!</li>
          <li>So, that leaves passwords. There's a W3C browser API for managing that in a sensible way, which I've used where it exists. Alas, it doesn't exist on Firefox or Safari yet, so I've simulated it myself. This is what you see in the demo on these browsers. <i>However...</i> to do, I've stored the user's password in site-specific storage in the browser, rather than in the non-existent password credential manager. Is anyone going to freak about that? The alternative is to not save the password in my storage, but instead make the user enter the password each time in a form, which will be autofilled from the browser anyway. I've implemented that, too, so that you can compare. Go to <a href="https://web-connections.herokuapp.com/account.html?store-passwords=false">/account.html?store-passwords=false</a> to try out that version.</li>
        </ol>
      </p>
    </div>

    <div id="loggedOut" class="mdc-snackbar">
      <div class="mdc-snackbar__surface">
        <div class="mdc-snackbar__label"
             role="status"
             aria-live="polite">
          Signed out.
        </div>
        <div class="mdc-snackbar__actions">
          <button type="button" class="mdc-button mdc-snackbar__action">
            <span class="mdc-button__label">Sign in</span>
          </button>
        </div>
      </div>
    </div>

    <div id="signingIn" class="mdc-snackbar">
      <div class="mdc-snackbar__surface">
        <div class="mdc-snackbar__label"
             role="status"
             aria-live="polite">
          Signing in as <span id="signingIn__secondary"></span>
        </div>
        <div class="mdc-snackbar__actions">
          <button class="material-icons mdc-icon-button mdc-snackbar__action">cancel</button>
        </div>
      </div>
    </div>
    <div id="changed" class="mdc-snackbar">
      <div class="mdc-snackbar__surface">
        <div class="mdc-snackbar__label"
             role="status"
             aria-live="polite">
          Changed <span id="changed__secondary"></span>.
        </div>
        <div class="mdc-snackbar__actions">
          <button class="material-icons mdc-icon-button mdc-snackbar__action">cancel</button>
        </div>
      </div>
    </div>
    <div id="registrationFail" class="mdc-snackbar mdc-snackbar--stacked">
      <div class="mdc-snackbar__surface">
        <div class="mdc-snackbar__label"
             role="status"
             aria-live="polite">
          <span id="registrationFail__secondary"></span>
        </div>
        <div class="mdc-snackbar__actions">
          <button class="material-icons mdc-icon-button mdc-snackbar__action">cancel</button>
        </div>
      </div>
    </div>
    
    <!-- Dialogs  -->
    <div id="notImplementedIndependent" class="mdc-dialog">
      <div class="mdc-dialog__container">
        <div class="mdc-dialog__surface"
             role="alertdialog"
             aria-modal="true"
             aria-labelledby="not-implement-title"
             aria-describedby="not-implemented-content">
          <!-- Title cannot contain leading whitespace due to mdc-typography-baseline-top() -->
          <h2 class="mdc-dialog__title" id="not-implement-title">Not Implemented</h2>
          <div class="mdc-dialog__content" id="not-implemented-content">
            The implementation is not likely to interact much with accounts and registration.
          </div>
          <footer class="mdc-dialog__actions">
            <button type="button" class="mdc-button mdc-dialog__button" data-mdc-dialog-action="yes">
              <div class="mdc-button__ripple"></div>
              <span class="mdc-button__label">OK</span>
            </button>
          </footer>
        </div>
      </div>
      <div class="mdc-dialog__scrim"></div>
    </div>
    <div id="notImplementedDependent" class="mdc-dialog">
      <div class="mdc-dialog__container">
        <div class="mdc-dialog__surface"
             role="alertdialog"
             aria-modal="true"
             aria-labelledby="not-implement-title"
             aria-describedby="not-implemented-content">
          <!-- Title cannot contain leading whitespace due to mdc-typography-baseline-top() -->
          <h2 class="mdc-dialog__title" id="not-implement-title">Not Implemented</h2>
          <div class="mdc-dialog__content" id="not-implemented-content">
            The implementation may interact with mechanisms shown here. We'll want to think this through sooner rather than later.
          </div>
          <footer class="mdc-dialog__actions">
            <button type="button" class="mdc-button mdc-dialog__button" data-mdc-dialog-action="yes">
              <div class="mdc-button__ripple"></div>
              <span class="mdc-button__label">OK</span>
            </button>
          </footer>
        </div>
      </div>
      <div class="mdc-dialog__scrim"></div>
    </div>
    <div id="privacy" class="mdc-dialog">
      <div class="mdc-dialog__container">
        <div class="mdc-dialog__surface"
             role="alertdialog"
             aria-modal="true"
             aria-labelledby="not-implement-title"
             aria-describedby="not-implemented-content">
          <!-- Title cannot contain leading whitespace due to mdc-typography-baseline-top() -->
          <h2 class="mdc-dialog__title" id="not-implement-title">Privacy</h2>
          <div class="mdc-dialog__content" id="not-implemented-content">
            <p>Not implemented yet, except...</p>
            <p>It is debatable whether a delete-your-account! button (for signed-in users) should be here, or in the user menu. Regardless, the button is real - partly because it interacts with a lot of the semantics of accounts, and partly because it's useful to have during testing.</p>
            <p>
              <button id="forgetMe" class="mdc-button mdc-button--raised">
                <i class="material-icons mdc-button__icon">voice_over_off</i>
                <span class="mdc-button__label">forget me</span>
              </button> will delete your account on our servers, and sign you out. (You can re-register later after <i>[period of time, currently zero]</i>.) <b>You will probably also want to tell your browser to forget the information for this site.</b> (We can't do that.) See your browser's documentation for site passwords.
            </p>
          </div>
          <footer class="mdc-dialog__actions">
            <button type="button" class="mdc-button mdc-dialog__button" data-mdc-dialog-action="yes">
              <div class="mdc-button__ripple"></div>
              <span class="mdc-button__label">OK</span>
            </button>
          </footer>
        </div>
      </div>
      <div class="mdc-dialog__scrim"></div>
    </div>

    <div id="selectUser" class="mdc-dialog">
      <div class="mdc-dialog__container">
        <div class="mdc-dialog__surface"
             role="alertdialog"
             aria-modal="true"
             aria-labelledby="selectUser-title"
             aria-describedby="selectUser-content">
          <!-- Title cannot contain leading whitespace due to mdc-typography-baseline-top() -->
          <h2 class="mdc-dialog__title" id="selectUser-title"><span id="selectUser__context">Sign in</span> as</h2>
          <div class="mdc-dialog__content">
            <template id="selectUserTemplate">
              <li class="mdc-list-item">
                <img class="mdc-list-item__graphic" aria-hidden="true" />
                <span class="mdc-list-item__text">
                  <span class="mdc-list-item__primary-text"></span>
                  <span class="mdc-list-item__secondary-text"></span>
                </span>
              </li>
              <li class="mdc-list-item">
                <div class="list-item__text-field-container">
                  <label id="selectPassword__label" class="mdc-text-field mdc-text-field--outlined mdc-text-field--with-trailing-icon" for="password">
                    <input id="selectPassword" type="password" class="mdc-text-field__input" aria-labelledby="password__floatingLabel" autocomplete="current-password" required>
                    <button id="selectPasswordVisibility" class="mdc-icon-button material-icons mdc-text-field__icon mdc-text-field__icon--trailing">visibility</button>
                    <div id="selectPassword__outline" class="mdc-notched-outline">
                      <div class="mdc-notched-outline__leading"></div>
                      <div class="mdc-notched-outline__notch">
                        <span id="selectPassword__floatingLabel" class="mdc-floating-label">Password</span>
                      </div>
                      <div class="mdc-notched-outline__trailing"></div>
                    </div>
                  </label>
                </div>
              </li>
            </template>
            <ul id="selectUser__list" class="mdc-list mdc-list--two-line mdc-list--avatar-list">
            </ul>
          </div>
          <footer class="mdc-dialog__actions">
            <button type="button" class="mdc-button mdc-dialog__button" data-mdc-dialog-action="cancel">
              <div class="mdc-button__ripple"></div>
              <span class="mdc-button__label">cancel</span>
            </button>
            <button type="button" class="mdc-button mdc-dialog__button" data-mdc-dialog-action="yes">
              <div class="mdc-button__ripple"></div>
              <span class="mdc-button__label">sign in</span>
            </button>
          </footer>
        </div>
      </div>
      <div class="mdc-dialog__scrim"></div>
    </div>
    
    <div id="credits" class="mdc-dialog">
      <form id="buyEnergy" class="FIXMEonlyRegistered mdc-dialog__container">
        
        <div class="mdc-dialog__surface"
             role="alertdialog"
             aria-modal="true"
             aria-labelledby="credits-title"
             aria-describedby="credits-content">
          <!-- Title cannot contain leading whitespace due to mdc-typography-baseline-top() -->
          <h2 class="mdc-dialog__title" id="credits-title">Energy</h2>
          <div class="mdc-dialog__content" id="credits-content">
            <p>The louder you speak, or the faster you move, the more energy you consume. When you run out, you cannot speak or move.</p>
            <p>Your energy level is shown by the solid white bar at top of the page. For example, your current level is <span id="energyAmount"></span>%.</p>
            <p>Your rate of energy consumption is shown by the moving green bar.</p>
            <p>Registered users have their energy replenished automatically. Registered users can also earn extra energy for free by contributing their <a href="https://web-connections.herokuapp.com/credits.html">idle computers</a>, or simply buy extra energy with a credit card.</p>
            <p class="onlyUnregistered">To get more energy, you must register (for free).</p>

              <div class="form-group mdc-elevation--z20">
                <ul id="buyEnergy__list" class="mdc-list mdc-list--non-interactive list--floating-height">
                  <li class="mdc-list-item">
                    <div class="mdc-typography mdc-typography--body2">
                      Energy credits can be purchased for 100 units per $1.00. <i>FIXME: How should we display a balance more than 100% on the energy bar?</i>
                    </div>
                  </li>
                  
                  <li class="mdc-list-item">
                    <div class="list-item__text-field-container">
                      <label id="selectedCard__label" class="mdc-text-field mdc-text-field--outlined" for="selectedCard">
                        <input id="selectedCard" type="text" class="mdc-text-field__input" aria-labelledby="selectedCard__floatingLabel" required>
                        <div id="selectedCard__outline" class="mdc-notched-outline">
                          <div class="mdc-notched-outline__leading"></div>
                          <div class="mdc-notched-outline__notch">
                            <span id="selectedCard__floatingLabel" class="mdc-floating-label">Selected Card</span>
                          </div>
                          <div class="mdc-notched-outline__trailing"></div>
                        </div>
                      </label>
                    </div>
                  </li>

                  <li class="mdc-list-item">
                    <div class="list-item__text-field-container">
                      <label id="purchaseAmount__label" class="mdc-text-field mdc-text-field--outlined" for="purchaseAmount">
                        <input id="puchaseAmount" type="number" class="mdc-text-field__input" aria-labelledby="purchaseAmount__floatingLabel" autocomplete="off" required min="1" step="1" max="100">
                        <div id="purchaseAmount__outline" class="mdc-notched-outline">
                          <div class="mdc-notched-outline__leading"></div>
                          <div class="mdc-notched-outline__notch">
                            <span id="purchaseAmount__floatingLabel" class="mdc-floating-label">Purchase Amount</span>
                          </div>
                          <div class="mdc-notched-outline__trailing"></div>
                        </div>
                      </label>
                    </div>
                  </li>
                </ul>
              </div>
          
          </div>
          <footer class="mdc-dialog__actions">
            <button type="button" class="mdc-button mdc-dialog__button" data-mdc-dialog-action="cancel">
              <div class="mdc-button__ripple"></div>
              <span class="mdc-button__label">cancel</span>
            </button>
            <input type="submit" class="mdc-button mdc-dialog__button" value="submit">
          </footer>
        </div>
      </form>
      <div class="mdc-dialog__scrim"></div>
    </div>

    <!-- REGISTRATION -->
    <div id="registration" class="mdc-dialog">
      <form id="registrationForm" class="mdc-dialog__container">
        <div class="mdc-dialog__surface"
             role="alertdialog"
             aria-modal="true"
             aria-labelledby="registration-title"
             aria-describedby="registration-content">
            
            <!-- Title cannot contain leading whitespace due to mdc-typography-baseline-top() -->
            <h2 class="mdc-dialog__title" id="registration-title"><span class="onlyRegistered">Update </span>Registration</h2>
            <div class="mdc-dialog__content" id="registration-content">
              <div class="onlyUnregistered">
                <p>Registration is free.</p>
                <p>Only registered users can change their display name, strength, or get more <a href="#energy">energy</a>.</p>
              </div>
              <div class="onlyRegistered">
                You can change any of these current settings.
              </div>

              <div class="form-group mdc-elevation--z20">
                <ul id="loginPublic__list" class="mdc-list mdc-list--non-interactive list--floating-height">
                  <li class="mdc-list-item">
                    <div class="mdc-typography mdc-typography--body2">
                      Public - visible to others
                    </div>
                  </li>
                  <li class="mdc-list-item">
                    <div class="list-item__text-field-container">
                      <label id="displayName__label" class="mdc-text-field mdc-text-field--outlined" for="displayName">
                        <input id="displayName" type="text" class="mdc-text-field__input" aria-labelledby="displayName__floatingLabel" autocomplete="nickname given-name name" required tabindex="0">
                        <div id="displayName__outline" class="mdc-notched-outline">
                          <div class="mdc-notched-outline__leading"></div>
                          <div class="mdc-notched-outline__notch">
                            <span id="displayName__floatingLabel" class="mdc-floating-label">Display name</span>
                          </div>
                          <div class="mdc-notched-outline__trailing"></div>
                        </div>
                      </label>
                    </div>
                  </li>
                  
                </ul>
              </div>

              <div class="form-group mdc-elevation--z20">
                <ul id="loginPrivate__list" class="mdc-list mdc-list--non-interactive list--floating-height">
                  <li class="mdc-list-item">
                    <div class="mdc-typography mdc-typography--body2">
                      Private - not shared with anyone
                    </div>
                  </li>
                  
                  <li class="mdc-list-item">
                    <div class="list-item__text-field-container">
                      <label id="email__label" class="mdc-text-field mdc-text-field--outlined" for="email">
                        <input id="email" type="email" class="mdc-text-field__input" aria-labelledby="email__floatingLabel" autocomplete="email" required>
                        <input id="oldEmail" type="hidden">
                        <input id="oldPassword" type="hidden">
                        <div id="email__outline" class="mdc-notched-outline">
                          <div class="mdc-notched-outline__leading"></div>
                          <div class="mdc-notched-outline__notch">
                            <span id="email__floatingLabel" class="mdc-floating-label">Email</span>
                          </div>
                          <div class="mdc-notched-outline__trailing"></div>
                        </div>
                      </label>
                    </div>
                  </li>

                  <li class="mdc-list-item">
                    <div class="list-item__text-field-container">
                      <label id="password__label" class="mdc-text-field mdc-text-field--outlined mdc-text-field--with-trailing-icon" for="password">
                        <input id="password" type="password" class="mdc-text-field__input" aria-labelledby="password__floatingLabel" autocomplete="new-password" required>
                        <button id="passwordVisibility" class="mdc-icon-button material-icons mdc-text-field__icon mdc-text-field__icon--trailing">visibility</button>
                        <div id="password__outline" class="mdc-notched-outline">
                          <div class="mdc-notched-outline__leading"></div>
                          <div class="mdc-notched-outline__notch">
                            <span id="password__floatingLabel" class="mdc-floating-label">Password</span>
                          </div>
                          <div class="mdc-notched-outline__trailing"></div>
                        </div>
                      </label>
                    </div>
                  </li>

                  <li class="mdc-list-item">
                    <div class="list-item__text-field-container">
                      <label id="face__label" class="mdc-text-field mdc-text-field--outlined mdc-text-field--with-trailing-icon" for="face">
                        <input id="face" type="text" class="mdc-text-field__input" aria-labelledby="face__floatingLabel" required autocomplete="off">
                        <img id="face__image" class="mdc-list-item__graphic hidden"/>
                        <button id="faceCamera" class="mdc-icon-button material-icons mdc-text-field__icon mdc-text-field__icon--trailing">photo_camera</button>
                        <div id="face__outline" class="mdc-notched-outline">
                          <div class="mdc-notched-outline__leading"></div>
                          <div class="mdc-notched-outline__notch">
                            <span id="face__floatingLabel" class="mdc-floating-label">Security selfie</span>
                          </div>
                          <div class="mdc-notched-outline__trailing"></div>
                        </div>
                      </label>
                    </div>
                  </li>
                  
                </ul>
              </div>
              
            </div>
            <footer class="mdc-dialog__actions">
              <button type="button" class="mdc-button mdc-dialog__button" data-mdc-dialog-action="cancel">
                <div class="mdc-button__ripple"></div>
                <span class="mdc-button__label">cancel</span>
              </button>
              <!-- value used as button name, which default on Firefox to "Submit Query" -->
              <input type="submit" class="mdc-button mdc-dialog__button" id="register__submit" value="Register">
            </footer>
        </div>
      </form>
      <div class="mdc-dialog__scrim"></div>
    </div>

    <!-- After registration so drawn on top -->
    <div id="webcam" class="mdc-dialog">
      <div class="mdc-dialog__container">
        <div class="mdc-dialog__surface"
             role="alertdialog"
             aria-modal="true"
             aria-labelledby="not-implement-title"
             aria-describedby="not-implemented-content">
          <!-- Title cannot contain leading whitespace due to mdc-typography-baseline-top() -->
          <h2 class="mdc-dialog__title" id="not-implement-title">Security Selfie - Sound on, please</h2>
          <div class="mdc-dialog__content">
            <div class="overlaidMedia">
              <video id="webcamVideo" autoplay playsinline></video>
              <canvas id="videoOverlay"></canvas>
            </div>
          </div>
          <footer class="mdc-dialog__actions">
            <button type="button" class="mdc-button mdc-dialog__button" data-mdc-dialog-action="yes">
              <div class="mdc-button__ripple"></div>
              <span class="mdc-button__label">skip registration</span>
            </button>
          </footer>
        </div>
      </div>
      <div class="mdc-dialog__scrim"></div>
    </div>
    
    <script src="account.js"></script>
  </body>
</html>
