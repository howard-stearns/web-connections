<!DOCTYPE html>
<html lang="en" >
  <head>
    <title>Web Connections Test</title>
  </head>
  <body>
    <h1>Test Your P2P Web Connections</h1>

    <style>
      td { text-align: center; }
    </style>
    <table border="1" align="center">
      <tr>
        <th>Credits This Session</th>
        <th>Served Others</th>
        <td rowspan="2">Download <a href="https://hifi-telemetric.herokuapp.com/getdata">CSV of all results so far</a></td>
      </tr>
      <tr><td id="credits">0</td><td id="served">0</td></tr>
    </table>

    <p>The following information will be recorded.</p>
    <p>Required capabilities:
      <input type="checkbox" id="promises" disabled>promises</input>
      <input type="checkbox" id="storage" disabled>local storage</input>
      <input type="checkbox" id="s2t" disabled>speech to text</input>
      <input type="checkbox" id="t2s" disabled>text to speech</input>
      <input type="checkbox" id="ws" disabled>web sockets</input>
      <input type="checkbox" id="sse" disabled>server-side events (SSE)</input>
      <input type="checkbox" id="rtc" disabled>realtime communications (RTC)</input>
      <input type="checkbox" id="dchan" disabled>rtc data</input>
      <input type="checkbox" id="av" disabled>rtc audio/video</input>
    </p>
    <p>
      id: <span id="ourId"></span><br>
      agent: <span id="agent"></span><br>
    </p>
    <table id="table" border="1" align="center">
      <tr>
        <th colspan="8">general</th>
        <th colspan="3">webSocket to server & back</th>
        <th colspan="3">SSE to server & back</th>
        <th colspan="3">RTC dataChannel to peer & back</th>
        <th colspan="3">RTC media</th>
        <th colspan="3">outbound audio</th>
        <th colspan="9">outbound video</th>        
        <th colspan="5">inbound audio</th>
        <th colspan="5">inbound video</th>        
      </tr>
      <tr>        
        <th>test date/time</th>
        <th>timezone offset (minutes)</th>
        <th>your ip</th>
        <th>peer ip</th>
        <th>your ice</th>
        <th>peer ice</th>
        <th>peer id</th>
        <th>concurrency during test</th>

        <th>setup (ms)</th>
        <th>ping (ms)</th>
        <th>bandwidth (kbps)</th>

        <th>setup (ms)</th>
        <th>ping (ms)</th>
        <th>bandwidth (kbps)</th>

        <th>setup (ms)</th>
        <th>ping (ms)</th>
        <th>bandwidth (kbps)</th>

        <th>n tracks</th>
        <th>setup (ms)</th>
        <th>test runtime (ms)</th>

        <th>bytesSent</th>
        <th>nackCount</th>
        <th>packetsSent</th>

        <th>bitrateMean</th>
        <th>bitrateStdDev</th>
        <th>bytesSent</th>
        <th>droppedFrames</th>
        <th>framerateMean</th>
        <th>framerateStdDev</th>
        <th>framesEncoded</th>
        <th>nackCount</th>
        <th>packetsSent</th>

        <th>bytesReceived</th>
        <th>jitter</th>
        <th>packetsLost</th>
        <th>packetsReceived</th>
        <th>roundTripTime</th>

        <th>bytesReceived</th>
        <th>jitter</th>
        <th>packetsLost</th>
        <th>packetsReceived</th>
        <th>roundTripTime</th>
      </tr>
    </table>
    <p><span id="userMessages"></span></p>
    <button id="retest" type="button" onclick="doAllTests()" disabled>Retest without reloading</button>

    <script src="basic-report.js"></script>
    <script src="rtc-signalling-peer.js"></script>
    <script src="script.js"></script>
  </body>
</html>
