<!DOCTYPE html>
<html lang="en" >
  <head>
    <title>Web Connections Test</title>
  </head>
  <body>
    <h1>Test Your P2P Web Connections</h1>

    <style>
      td { text-align: center; }
    </style>

    <table border="1" align="center">
      <tr>
        <th rowspan="2" id="enableTestingLabel">Enable Testing</th>
        <th rowspan="2">Next Scheduled Test</th>
        <th colspan="2">Credits</th>
        <th rowspan="2">Served Others</th>
        <!-- <td rowspan="3">Download <a href="https://hifi-telemetric.herokuapp.com/getdata">CSV of all results so far</a></td> -->
      </tr>
      <tr>
        <th>recorded so far</th>
        <th>upon next test completion</th>
      </tr>
      <tr>
        <td><button id="start" type="button" onclick="doAllTests()">Start</button></td>
        <td id="nextScheduled">not enabled</td>
        <td id="creditsRecorded">0</td>
        <td id="creditsEstimated">press Start button</td>
        <td id="served">0</td>
      </tr>
    </table>
    <p><span id="userMessages"></span></p>

    <hr></hr>
    <p>The following information will be recorded when you test.</p>
    <p>
      <b>your id</b>: <span id="ourId"></span><br>
      <b>browser</b>: <span id="agent"></span><br>
      <b>features</b>:
      <input type="checkbox" id="promises" disabled>promises</input>
      <input type="checkbox" id="storage" disabled>local storage</input>
      <input type="checkbox" id="s2t" disabled>speech to text</input>
      <input type="checkbox" id="t2s" disabled>text to speech</input>
      <input type="checkbox" id="ws" disabled>web sockets</input>
      <input type="checkbox" id="sse" disabled>server-side events (SSE)</input>
      <input type="checkbox" id="rtc" disabled>realtime communications (RTC)</input>
      <input type="checkbox" id="dchan" disabled>rtc data</input>
      <input type="checkbox" id="av" disabled>rtc mdedia</input>
      <input type="checkbox" id="audioNode" disabled>audio context</input>
      <input type="checkbox" id="capture" disabled>capture stream</input>
      <input type="checkbox" id="webgl" disabled>WebGL </input>
      <input type="checkbox" id="webgl2" disabled>WebGL 2</input>
    </p>
    <table id="table" border="1" align="center">
      <tr>
        <th colspan="8">general</th>
        <th colspan="3">webSocket to server & back</th>
        <th colspan="3">SSE to server & back</th>
        <th colspan="3">RTC dataChannel to peer & back</th>
        <th colspan="3">RTC media</th>
        <th colspan="3">outbound audio</th>
        <th colspan="9">outbound video</th>        
        <th colspan="5">inbound audio</th>
        <th colspan="5">inbound video</th>        
      </tr>
      <tr>        
        <th>test date/time</th>
        <th>timezone offset (minutes)</th>
        <th>your ip</th>
        <th>peer ip</th>
        <th>your ice</th>
        <th>peer ice</th>
        <th>peer id</th>
        <th>concurrency during test</th>

        <th>setup (ms)</th>
        <th>ping (ms)</th>
        <th>bandwidth (kbps)</th>

        <th>setup (ms)</th>
        <th>ping (ms)</th>
        <th>bandwidth (kbps)</th>

        <th>setup (ms)</th>
        <th>ping (ms)</th>
        <th>bandwidth (kbps)</th>

        <th>n tracks</th>
        <th>setup (ms)</th>
        <th>test runtime (ms)</th>

        <th>bytesSent</th>
        <th>nackCount</th>
        <th>packetsSent</th>

        <th>bitrateMean</th>
        <th>bitrateStdDev</th>
        <th>bytesSent</th>
        <th>droppedFrames</th>
        <th>framerateMean</th>
        <th>framerateStdDev</th>
        <th>framesEncoded</th>
        <th>nackCount</th>
        <th>packetsSent</th>

        <th>bytesReceived</th>
        <th>jitter</th>
        <th>packetsLost</th>
        <th>packetsReceived</th>
        <th>roundTripTime</th>

        <th>bytesReceived</th>
        <th>jitter</th>
        <th>packetsLost</th>
        <th>packetsReceived</th>
        <th>roundTripTime</th>
      </tr>
    </table>

    <script src="basic-report.js"></script>
    <script src="rtc-signaling-peer.js"></script>
    <script src="script.js"></script>
  </body>
</html>
